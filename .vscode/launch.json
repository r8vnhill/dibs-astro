{
  // VS Code launch configurations for the DIBS Astro project.
  // Use "Launch: Astro dev (node)" to run a debuggable Astro dev server. If you prefer
  // to start the server via the task runner, use "Attach to Process" and pick the
  // running Node process.
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Launch: Astro dev (node)",
      // Run the Astro CLI entrypoint under Node so the debugger can control it.
      // Astro v5 uses astro.js (not bin/cli.js) as the main entry point.
      "program": "${workspaceFolder}/node_modules/astro/astro.js",
      "args": ["dev"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal",
      "internalConsoleOptions": "neverOpen",
      "skipFiles": ["<node_internals>/**"]
    },
    {
      "type": "node",
      "request": "attach",
      "name": "Attach to Process",
      "processId": "${command:PickProcess}",
      "skipFiles": ["<node_internals>/**"]
    },
    {
      // Convenience: launches the exact shell command the user asked for using node-terminal.
      "command": "./node_modules/.bin/astro dev",
      "name": "Development server (shell)",
      "request": "launch",
      "type": "node-terminal"
    },
    {
      // Convenience: build helper via shell
      "command": "./node_modules/.bin/astro build",
      "name": "Build site (shell)",
      "request": "launch",
      "type": "node-terminal"
    },
    {
      // Use pnpm to run the project's `deploy` script (build + wrangler deploy)
      "name": "Deploy (pnpm run deploy)",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "pnpm",
      "args": ["run", "deploy"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal"
    },
    {
      // Preview using pnpm run preview
      "name": "Preview (pnpm run preview)",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "pnpm",
      "args": ["run", "preview"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal"
    }
  ]
}
