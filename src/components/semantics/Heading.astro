---
import type { AstroComponentFactory } from "~/types/astro-component";
import FilledIcon from "../ui/callouts/FilledIcon.astro";
import type { HeadingLevel } from "~/utils";

type Props = {
  Icon?: AstroComponentFactory | null;
  headingLevel?: Exclude<HeadingLevel, "h1">;
  class?: string;
  decorativeIcon?: boolean;
};

const {
  Icon = null,
  headingLevel = "h3",
  class: className = "",
  decorativeIcon = true,
  ...rest
} = Astro.props as Props & Record<string, any>;

const Tag = headingLevel;
---

<Tag
  class:list={["flex items-center gap-2", className]}
  {...rest}
>
  <slot name="icon">
    {Icon && (
      <FilledIcon
        Icon={Icon}
        class="inline-block text-current"
        iconClass="shrink-0"
        size="1em"
        variant="outline"
        decorative={decorativeIcon}
        aria-hidden={decorativeIcon ? "true" : "false"}
      />
    )}
  </slot>

  <slot />
</Tag>
