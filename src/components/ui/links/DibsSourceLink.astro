---
import Link from "./Link.astro";

type Props = {
    /** Nombre corto del repositorio sin prefijo `dibs-`. */
    repo: string;
    /** Ruta del archivo dentro del repositorio. */
    file: string;
    /** Texto opcional a mostrar en el enlace. */
    title?: string;
    /** Commit hash, tag o nombre de branch (opcional). */
    ref?: string;
};

const { repo, file, title, ref }: Props = Astro.props;

// Si no se especifica ref, apunta a la rama main
const resolvedRef = ref ?? "main";

// GitLab usa `-/blob/<ref>/<file>` para cualquier referencia
const href = `https://gitlab.com/r8vnhill/dibs-${repo}/-/blob/${resolvedRef}/${file}`;
---

<Link {href}>
    <slot>{title ?? `${repo}/${file}`}</slot>
</Link>
