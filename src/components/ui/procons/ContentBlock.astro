---
/**
 * Props for the ContentBlock component.
 *
 * This component renders a styled section with a title and slot content.
 * It is used as a wrapper for modular content blocks such as "Pros" or "Cons".
 */
export interface Props {
    /**
     * Custom title for the section (overrides defaultTitle if provided).
     */
    title?: string | undefined;
    /**
     * Fallback title when no custom title is specified.
     */
    defaultTitle?: string | undefined;
    /**
     * Additional Tailwind CSS classes for the section container.
     */
    class?: string | undefined;
    /**
     * Additional Tailwind CSS classes for the title element.
     */
    titleClass?: string | undefined;
    /**
     * Custom id for the section; falls back to a slugified title.
     */
    id?: string | undefined;
}

// Destructure and apply default values from incoming props
const {
    title,
    defaultTitle = "Sin tÃ­tulo",
    class: className,
    titleClass = "",
    id,
} = Astro.props as Props;

// Choose between provided title or fallback
const resolvedTitle = title ?? defaultTitle;
const slugify = (value: string) =>
    value
        .normalize("NFD")
        .replace(/\p{Diacritic}/gu, "")
        .toLowerCase()
        .replace(/[^a-z0-9]+/g, "-")
        .replace(/(^-|-$)/g, "");
const sectionId = (id ?? slugify(resolvedTitle)) || "section";
const headingId = `${sectionId}__title`;
---

<!-- Main section wrapper. -->
<section
    class:list={["pt-0", "pb-4", "px-4", "flex", "flex-col", "gap-2", className]}
    aria-labelledby={headingId}
    id={sectionId}
>
    <h3
        id={headingId}
        class:list={[
            "text-lg",
            "sm:text-xl",
            "font-semibold",
            "tracking-tight",
            titleClass,
        ]}
    >
        {resolvedTitle}
    </h3>

    <!-- Content slot: allows consumers of this component to inject arbitrary HTML -->
    <slot />
</section>
