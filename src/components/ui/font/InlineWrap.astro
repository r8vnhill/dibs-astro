---
import { Link } from "../links";

type WrapProps = {
    href?: string;
    newTab?: boolean;
    class?: string;
    // allow pass-through (aria-*, data-*, etc.) to the <a>
    [key: string]: any;
};

const { href, newTab = false, class: className, ...rest } = Astro.props as WrapProps;

const isExternal = typeof href === "string" && /^(https?:)?\/\//.test(href);
const aProps = isExternal && newTab
    ? { target: "_blank", rel: "noopener noreferrer" }
    : {};
---

{
        href ? (
        <Link
            {href} class={className}
            {...aProps} {...rest}
        >
            <slot />
        </Link>
    ): (
           // no props on slot; nothing will be applied anyway
       <slot />
    )
}
