---
/**
 * InlineCode.astro
 *
 * Displays inline code with dual Shiki themes (light/dark) using Astro's <Code /> component.
 * Ensures good typography, accessibility, and theming consistency using Tailwind utilities.
 */

import type { CodeLanguage } from "astro";
import { Code } from "astro:components";

type Props = {
  /**
   * Code snippet to render inline.
   */
  code: string;
  /**
   * Language for syntax highlighting.
   */
  lang: CodeLanguage;
  /**
   * Additional Tailwind classes.
   */
  class?: string;
};

const { code, lang, class: className = "" } = Astro.props as Props;

const safeLang = lang || "txt";
const baseStyle = `
  text-[0.95em]
  font-mono
  rounded
  px-1.5
  py-[1px]
  whitespace-nowrap
  bg-transparent
`;
---

<code
  class:list={[
    "inline-block",
    "align-[0.05em]",
    "leading-[1.4]",
    baseStyle,
    className,
  ]}
>
  <span class="dark:hidden">
    <Code
      code={code}
      lang={safeLang}
      inline
      theme="catppuccin-latte"
      class:list={["!bg-transparent", "!shadow-none"]}
    />
  </span>
  <span class="hidden dark:inline">
    <Code
      code={code}
      lang={safeLang}
      inline
      theme="catppuccin-mocha"
      class:list={["!bg-transparent", "!shadow-none"]}
    />
  </span>
</code>
