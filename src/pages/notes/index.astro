---
import * as icons from "~/assets/img/icons";
import Package from "~/assets/img/icons/package.svg";
import TerminalWindow from "~/assets/img/icons/terminal-window.svg";
import TreeStructure from "~/assets/img/icons/tree-structure.svg";
import Heading from "~/components/semantics/Heading.astro";
import {
  Table,
  TableBody,
  TableCaption,
  TableCell,
  TableHeader,
  TableRow,
} from "~/components/starwind/table";
import {
  Tabs,
  TabsContent,
  TabsList,
  TabsTrigger,
} from "~/components/starwind/tabs";
import { Abstract, Important, More, Note } from "~/components/ui/callouts";
import { BashScript } from "~/components/ui/code";
import { PowerShellBlock } from "~/components/ui/code";
import {
  InlineBash,
  InlineKotlin,
  InlinePowerShell,
} from "~/components/ui/code";
import ShellBlock from "~/components/ui/code/ShellBlock.astro";
import List from "~/components/ui/list/List.astro";
import ListItem from "~/components/ui/list/ListItem.astro";
import NotesLayout from "~/layouts/NotesLayout.astro";
import NotesSection from "~/layouts/NotesSection.astro";

const title = "¬øC√≥mo usar este apunte?";
---

<NotesLayout title={title}>
  <Abstract headingLevel="h2" class="mt-6">
    <p>
      Este apunte es una gu√≠a de referencia r√°pida y un complemento a las
      clases, pensado para que puedas profundizar en los temas cuando lo
      necesites.
    </p>
    <p>
      Incluye explicaciones detalladas, ejemplos ilustrativos y problemas
      pr√°cticos para facilitar tu aprendizaje. Aunque las clases (diapositivas)
      suelen ser suficientes para comprender los conceptos, este apunte ofrece
      una mirada m√°s profunda para reforzar y aplicar lo aprendido.
    </p>
  </Abstract>

  <Important title="Mejor en pantallas grandes">
    El sitio est√° optimizado para su uso en computadoras. Aunque procuramos que
    funcione correctamente en dispositivos m√≥viles, algunos contenidos pueden no
    adaptarse por completo a pantallas peque√±as.
  </Important>

  <NotesSection id="estructura-del-apunte">
    <Heading Icon={TreeStructure} headingLevel="h2" slot="heading">
      Estructura del apunte
    </Heading>

    <p class="mb-4">
      Cada unidad se organiza en lecciones que desarrollan un tema espec√≠fico de
      manera gradual y pr√°ctica. Estas lecciones pueden incluir distintas
      secciones, pensadas para apoyar diversos estilos de aprendizaje:
    </p>

    <Table>
      <TableCaption>
        Secciones habituales que puede contener una lecci√≥n.
      </TableCaption>
      <TableHeader>
        <TableRow>
          <TableCell>üìå Secci√≥n</TableCell>
          <TableCell>üìñ Contenido</TableCell>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell class="font-semibold">Conceptos</TableCell>
          <TableCell>
            Explicaciones detalladas de los temas clave y su motivaci√≥n.
          </TableCell>
        </TableRow>
        <TableRow>
          <TableCell class="font-semibold">Ejemplos</TableCell>
          <TableCell>
            Fragmentos de c√≥digo que muestran c√≥mo aplicar lo aprendido.
          </TableCell>
        </TableRow>
        <TableRow>
          <TableCell class="font-semibold">Ejercicios</TableCell>
          <TableCell>
            Problemas dise√±ados para poner en pr√°ctica los conceptos estudiados.
          </TableCell>
        </TableRow>
        <TableRow>
          <TableCell class="font-semibold">Soluciones</TableCell>
          <TableCell>
            Respuestas y explicaciones de los ejercicios propuestos.
          </TableCell>
        </TableRow>
        <TableRow>
          <TableCell class="font-semibold">Referencias</TableCell>
          <TableCell>
            Recursos adicionales para profundizar en el estudio.
          </TableCell>
        </TableRow>
        <TableRow>
          <TableCell class="font-semibold">
            Ejemplos en otros lenguajes
          </TableCell>
          <TableCell>
            Comparaciones entre Kotlin y otros lenguajes de programaci√≥n.
          </TableCell>
        </TableRow>
      </TableBody>
    </Table>

    <Note>
      No todas las secciones aparecer√°n en todas las lecciones; el contenido se
      adapta a las necesidades de cada tema.
    </Note>
  </NotesSection>

  <NotesSection id="contenido-opcional">
    <Heading Icon={Package} headingLevel="h2" slot="heading">
      <span class="sr-only">Contenido opcional</span>
      <InlineKotlin code="cajita == opcional" />
    </Heading>

    <p>Todo lo que est√© en una caja como la siguiente:</p>

    <More title="es opcional">
      Soy una cajita opcional, gracias por leerme c:
    </More>
  </NotesSection>

  <NotesSection id="por-que-usamos-scripts">
    <Heading Icon={TerminalWindow} headingLevel="h2" slot="heading">
      ¬øPor qu√© usamos scripts para tareas simples?
    </Heading>

    <p>
      A lo largo de estos apuntes ver√°s scripts que, a primera vista, podr√≠an
      parecer innecesarios, ya que muchas tareas se pueden resolver con unas
      pocas l√≠neas en la terminal. Sin embargo, optamos por scripts m√°s
      detallados por razones
      <strong> did√°cticas y pr√°cticas</strong>.
    </p>

    <NotesSection id="didactic-value">
      <Heading Icon={icons.Student} headingLevel="h3">
        Valor did√°ctico
      </Heading>

      <List>
        <ListItem icon={icons.ListNumbers}>
          Permite <strong>mostrar cada paso de forma clara y controlada</strong
          >.
        </ListItem>

        <ListItem icon={icons.Terminal} class="flex flex-col items-start gap-2">
          <div class="flex items-center gap-2">
            Introduce gradualmente conceptos clave de scripting:
          </div>
          <List nested class="mt-1">
            <ListItem icon={icons.SlidersHorizontal}>
              Validaci√≥n de par√°metros.
            </ListItem>
            <ListItem icon={icons.ChatText}>
              Mensajes informativos (<InlineBash code="echo" />, <InlinePowerShell
                code="Write-Verbose"
              />, etc.).
            </ListItem>
            <ListItem icon={icons.WarningCircle}>
              Manejo de errores con <InlinePowerShell
                code="try"
              />/<InlinePowerShell code="catch" /> en PowerShell o <InlineBash
                code="set -e"
              />, <InlineBash code="trap" /> en Bash.
            </ListItem>
          </List>
        </ListItem>

        <ListItem icon={icons.CheckCircle}>
          Refuerza buenas pr√°cticas √∫tiles para la automatizaci√≥n de tareas m√°s
          complejas.
        </ListItem>
      </List>
    </NotesSection>

    <NotesSection id="useful-for-library-development">
      <Heading Icon={icons.PuzzlePiece} headingLevel="h3" slot="heading">
        √ötil para el desarrollo de bibliotecas
      </Heading>

      <p>
        En el desarrollo de bibliotecas reutilizables, especialmente cuando se
        integran m√∫ltiples herramientas, es com√∫n enfrentar
        <strong>casos no cubiertos por los sistemas de construcci√≥n</strong>
        (como Gradle o npm). En esos casos, los scripts permiten:
      </p>

      <List>
        <ListItem icon={icons.Sliders}>
          <strong>Personalizar el proceso de construcci√≥n</strong> seg√∫n las necesidades
          espec√≠ficas del proyecto.
        </ListItem>
        <ListItem icon={icons.PlugsConnected}>
          <strong>Integrar herramientas externas</strong> que no est√°n directamente
          soportadas por el sistema de construcci√≥n principal.
        </ListItem>
        <ListItem icon={icons.GearSix}>
          <strong>Automatizar tareas auxiliares</strong>, como validaciones
          previas, configuraciones iniciales o pasos de instalaci√≥n
          personalizados.
        </ListItem>
        <ListItem icon={icons.Repeat}>
          <strong>Hacer los procesos reproducibles</strong> y f√°ciles de seguir.
        </ListItem>
        <ListItem icon={icons.ShieldCheck}>
          <strong>Reducir errores</strong> al minimizar instrucciones manuales.
        </ListItem>
      </List>
    </NotesSection>

    <NotesSection id="scripts-example">
      <Heading Icon={icons.Terminal} headingLevel="h3" slot="heading">
        Ejemplo
      </Heading>

      <p>Esta tarea puede hacerse en la terminal en unas pocas l√≠neas:</p>

      <ShellBlock
        code={`
          mkdir my-lib
          cd my-lib
          gradle init
        `}
        lang="bash"
      >
        <Fragment slot="title">Desde la terminal</Fragment>
      </ShellBlock>

      <p class="mb-4">
        Sin embargo, encapsular esta l√≥gica en un script permite a√±adir
        validaciones, mensajes claros y manejo de errores:
      </p>

      <Tabs defaultValue="powershell">
        <TabsList>
          <TabsTrigger value="powershell">En PowerShell</TabsTrigger>
          <TabsTrigger value="bash">O en Bash</TabsTrigger>
        </TabsList>

        <TabsContent value="powershell">
          <PowerShellBlock
            code={`
              [CmdletBinding()]
              param (
                [Parameter(Mandatory)]
                [ValidateNotNullOrEmpty()]
                [string] $ProjectRoot
              )

              try {
                if (-not (Test-Path $ProjectRoot)) {
                  Write-Verbose "üìÅ Creating directory '$ProjectRoot'"
                  New-Item -Path $ProjectRoot -ItemType Directory -Force | Out-Null
                }

                $fullPath = Resolve-Path -Path $ProjectRoot
                Set-Location $fullPath

                Write-Verbose "üöÄ Running 'gradle init' in '$fullPath'"
                & gradle init
              }
              catch {
                Write-Error "‚ùå Gradle init failed: $_"
                exit 1
              }
            `}
          >
            <Fragment slot="title">Script en PowerShell</Fragment>
            <Fragment slot="source">Initialize-GradleProject.ps1</Fragment>
          </PowerShellBlock>
        </TabsContent>

        <TabsContent value="bash">
          <BashScript
            code={`
              #!/usr/bin/env bash
              set -euo pipefail

              if [ "$#" -ne 1 ] || [ -z "$1" ]; then
                echo "‚ùå Usage: $0 <project_root>" >&2
                exit 1
              fi

              project_root="$1"

              if [ ! -d "\${project_root}" ]; then
                echo "üìÅ Creating directory '\${project_root}'"
                mkdir -p "\${project_root}"
              fi

              cd "\${project_root}"
              echo "üöÄ Running 'gradle init' in \$(pwd)"
              gradle init
            `}
          >
            <Fragment slot="title">Script en Bash</Fragment>
            <Fragment slot="source">initialize_gradle_project.sh</Fragment>
          </BashScript>
        </TabsContent>
      </Tabs>

      <p class="mt-4">
        As√≠, incluso para tareas simples, se ense√±a <strong
          >scripting real</strong
        >, validaci√≥n de par√°metros y pr√°cticas seguras que facilitan la
        evoluci√≥n del proyecto.
      </p>
    </NotesSection>
  </NotesSection>

  <NotesSection id="reading-strategy">
    <Heading Icon={icons.MagnifyingGlass} headingLevel="h2" slot="heading">
      Estrategia de lectura
    </Heading>

    <p>
      La <strong>lectura diagonal</strong> es una t√©cnica r√°pida para obtener una
      visi√≥n general del contenido sin leer cada palabra. Consiste en mover los ojos
      en diagonal por la p√°gina, prestando atenci√≥n a <strong>t√≠tulos</strong>,
      <strong>palabras en negrita</strong>, <strong>listas</strong> y frases destacadas.
    </p>

    <p>
      Esta estrategia te ayuda a identificar las ideas principales, entender la
      estructura del texto y decidir en qu√© partes profundizar. Es especialmente
      √∫til para <strong>revisar materiales extensos</strong>, <strong
        >buscar informaci√≥n puntual</strong
      > o <strong>prepararte para una lectura m√°s detallada</strong>.
    </p>

    <NotesSection id="diagonal-reading">
      <Heading Icon={icons.Scan} headingLevel="h3" slot="heading">
        C√≥mo aplicar la lectura diagonal
      </Heading>

      <List>
        <ListItem icon={icons.TextAa}>
          <strong>1. Lee t√≠tulos y subt√≠tulos</strong> para obtener una visi√≥n general
          de la estructura.
        </ListItem>
        <ListItem icon={icons.Paragraph}>
          <strong>2. Revisa los primeros p√°rrafos</strong>, donde suele estar el
          mensaje clave de cada secci√≥n.
        </ListItem>
        <ListItem icon={icons.Target}>
          <strong>3. Ve a la conclusi√≥n</strong> para anticipar los puntos clave
          antes de leer en detalle.
        </ListItem>
        <ListItem icon={icons.HighlighterCircle}>
          <strong>4. Escanea elementos destacados</strong> como listas, texto en
          <strong> negrita</strong> o bloques de c√≥digo.
        </ListItem>
      </List>
    </NotesSection>
  </NotesSection>

  <NotesSection id="study-tips">
    <Heading Icon={icons.BookOpen} headingLevel="h2" slot="heading">
      Consejos de estudio
    </Heading>

    <p>Sigue estas recomendaciones para estudiar de forma m√°s efectiva:</p>

    <List>
      <ListItem icon={icons.ClockCountdown}>
        <strong>Organiza tu tiempo</strong>: estudia en sesiones cortas y
        regulares. Por ejemplo, 30 minutos al d√≠a son m√°s efectivos que tres
        horas seguidas.
      </ListItem>
      <ListItem icon={icons.Flask}>
        <strong>Practica de forma activa</strong>: realiza ejercicios y resuelve
        problemas, en lugar de limitarte a leer teor√≠a.
      </ListItem>
      <ListItem icon={icons.ChalkboardTeacher}>
        <strong>Ense√±a lo que aprendes</strong>: explicar conceptos a otra
        persona refuerza tu comprensi√≥n y te ayuda a detectar vac√≠os.
      </ListItem>
      <ListItem icon={icons.Coffee}>
        <strong>Toma descansos</strong>: las pausas entre sesiones facilitan que
        tu cerebro procese y consolide la informaci√≥n.
      </ListItem>
    </List>
  </NotesSection>

  <NotesSection id="time-planning">
    <Heading Icon={icons.ClockCountdown} headingLevel="h2" slot="heading">
      Planificaci√≥n del tiempo
    </Heading>

    <p>
      Cada lecci√≥n incluye una estimaci√≥n de tiempo para ayudarte a organizar tu
      estudio. Esta puede variar seg√∫n tu experiencia y conocimientos previos.
    </p>
    <p>
      No pasa nada si tardas m√°s: lo importante es comprender los conceptos y
      poder aplicarlos correctamente. Muchas estimaciones incluyen margen, as√≠
      que tambi√©n podr√≠as terminar antes.
    </p>
  </NotesSection>

  <NotesSection id="improve-notes">
    <Heading Icon={icons.Lightbulb} headingLevel="h2">
      ¬øTienes ideas para mejorar estos apuntes?
    </Heading>

    <p>Tu colaboraci√≥n es m√°s que bienvenida. Puedes:</p>

    <List class="mb-6">
      <ListItem icon={icons.Bug}>
        <strong>Reportar errores</strong> o proponer cambios abriendo un
        <a
          href="https://gitlab.com/r8vnhill/dibs-astro/issues"
          target="_blank"
          rel="noopener noreferrer">issue en GitLab</a
        >.
      </ListItem>
      <ListItem icon={icons.GitPullRequest}>
        <strong>Enviar mejoras</strong> mediante un <em>merge request</em>.
      </ListItem>
      <ListItem icon={icons.ShareFat}>
        <strong>Compartir estos apuntes</strong> con otrxs que puedan beneficiarse.
      </ListItem>
    </List>

    <p>üéâ ¬°Gracias por ser parte de esta comunidad de aprendizaje! üöÄ</p>
  </NotesSection>
</NotesLayout>
